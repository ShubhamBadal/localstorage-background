
    <html>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    
    <body>
    
    <input type="file" id="image-input" />
    
    <img id="image-container" />
    
	<script type="text/javascript">
    (function(){
          /** @type {Node} */
      var imgInput = document.getElementById( "image-input" ),
          /** @type {Node} */
          imgContainer = document.getElementById( "image-container" ),
          /** Restore image src from local storage */
          updateUi = function() {
            imgContainer.src = window.localStorage.getItem( "image-base64" );
          },
          /** Register event listeners */
          bindUi = function(){
            imgInput.addEventListener( "change", function(){
              if ( this.files.length ) {
                var reader = new FileReader();
                reader.onload = function( e ){
                  window.localStorage.setItem( "image-base64", e.target.result );
                  updateUi();
                };
                reader.readAsDataURL( this.files[ 0 ] );
              }
            }, false );
          };

    updateUi();
    bindUi();
    }());
	
	
var TheImage = localStorage.getItem('image-base64');
$('body').css({ 'background-image': "url(" + TheImage + ")" });
	
    </script>
    
    <script>
	$( document ).ready(function() {
	window.history.pushState("object or string", "Title", "new-url");
	/*window.history.replaceState("object or string", "Title", "zzzzzznew-url");*/
	});
    </script>
    
    </body>
    </html>